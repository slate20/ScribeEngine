<div class="project-settings-form" id="settingsTab">

    <div class="form-section">
        <div class="section-header">General</div>
        <div class="form-group">
            <label for="title">Game Title</label>
            <input type="text" id="title" name="title" value="{{ config.get('title', 'Untitled') }}" class="form-control">
        </div>
        <div class="form-group">
            <label for="author">Author</label>
            <input type="text" id="author" name="author" value="{{ config.get('author', '') }}" class="form-control">
        </div>
        <div class="form-group">
            <label for="start_passage">Starting Passage</label>
            <input type="text" id="start_passage" name="start_passage" value="{{ config.get('start_passage', 'start') }}" class="form-control">
        </div>
    </div>

    <div class="form-section">
        <div class="section-header">Features</div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="features.use_default_player" {% if config.get('features', {}).get('use_default_player', True) %}checked{% endif %}>
                Use Default Player Object
            </label>
        </div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="features.use_default_inventory" {% if config.get('features', {}).get('use_default_inventory', True) %}checked{% endif %}>
                Use Default Inventory System
            </label>
        </div>
    </div>

    <div class="form-section">
        <div class="section-header">Navigation</div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="nav.enabled" {% if config.get('nav', {}).get('enabled', True) %}checked{% endif %}>
                Enable Navigation Menu
            </label>
        </div>
        <div class="form-group">
            <label for="nav-position">Navigation Position</label>
            <select id="nav-position" name="nav.position" class="form-control">
                <option value="horizontal" {% if config.get('nav', {}).get('position', 'horizontal') == 'horizontal' %}selected{% endif %}>Horizontal</option>
                <option value="vertical-left" {% if config.get('nav', {}).get('position', 'horizontal') == 'vertical-left' %}selected{% endif %}>Vertical Left</option>
                <option value="vertical-right" {% if config.get('nav', {}).get('position', 'horizontal') == 'vertical-right' %}selected{% endif %}>Vertical Right</option>
            </select>
        </div>
    </div>

    <div class="form-section">
        <div class="section-header">Theme</div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="theme.enabled" {% if config.get('theme', {}).get('enabled', True) %}checked{% endif %}>
                Enable Custom Theme
            </label>
        </div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="theme.use_engine_defaults" {% if config.get('theme', {}).get('use_engine_defaults', True) %}checked{% endif %}>
                Use Engine Default CSS
            </label>
        </div>
        <div class="subsection">
            <h4 class="subsection-title">Colors</h4>
            <div class="form-grid">
                <div class="form-group">
                    <label for="primary_color">Primary</label>
                    <input type="text" id="primary_color" name="theme.colors.primary_color" value="{{ config.get('theme', {}).get('colors', {}).get('primary_color', '') }}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="background_color">Background</label>
                    <input type="text" id="background_color" name="theme.colors.background_color" value="{{ config.get('theme', {}).get('colors', {}).get('background_color', '') }}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="text_color">Text</label>
                    <input type="text" id="text_color" name="theme.colors.text_color" value="{{ config.get('theme', {}).get('colors', {}).get('text_color', '') }}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="link_color">Link</label>
                    <input type="text" id="link_color" name="theme.colors.link_color" value="{{ config.get('theme', {}).get('colors', {}).get('link_color', '') }}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="border_color">Border</label>
                    <input type="text" id="border_color" name="theme.colors.border_color" value="{{ config.get('theme', {}).get('colors', {}).get('border_color', '') }}" class="form-control">
                </div>
            </div>
        </div>
        <div class="subsection">
            <h4 class="subsection-title">Fonts</h4>
            <div class="form-grid">
                <div class="form-group">
                    <label for="body_font">Body Font</label>
                    <input type="text" id="body_font" name="theme.fonts.body_font" value="{{ config.get('theme', {}).get('fonts', {}).get('body_font', '') }}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="heading_font">Heading Font</label>
                    <input type="text" id="heading_font" name="theme.fonts.heading_font" value="{{ config.get('theme', {}).get('fonts', {}).get('heading_font', '') }}" class="form-control">
                </div>
            </div>
        </div>
    </div>

    <div class="form-section">
        <div class="section-header">Development</div>
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="debug_mode" {% if config.get('debug_mode', False) %}checked{% endif %}>
                Enable Debug Mode
            </label>
        </div>
        <div class="form-group">
            <button type="button" class="btn btn-secondary" onclick="openFile('{{ project_name }}', 'project.json', this)">
                Edit raw project.json
            </button>
        </div>
    </div>

        <div class="form-actions-sticky">
        <button class="btn btn-primary" hx-post="/api/project-settings/{{ project_name }}" hx-include="#settingsTab input, #settingsTab select" hx-swap="none" hx-on::after-request="refreshPreview(); showNotification('Settings saved successfully', 'success');">
            Save Settings
        </button>
    </div>
</div>
