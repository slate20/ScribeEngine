<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Scribe Engine - GUI Frontend</title>
</head>

<body>
	<!-- Startup Screen -->
	<div class="startup-screen" id="startupScreen">
		<div class="startup-content">
			<div class="startup-logo">
				<svg viewBox="0 0 100 100">
					<path d="M20 20 L50 10 L80 20 L50 30 Z M50 30 L50 70 M30 40 L70 40 M25 60 L75 60" />
				</svg>
			</div>
			<h1 class="startup-title">Scribe Engine</h1>
			<p class="startup-subtitle">Create rich, interactive text-based games with powerful scripting and modern web
				technologies</p>

			<div class="startup-actions">
				<div class="action-card" onclick="createNewProject()">
					<div class="action-icon">
						<svg width="24" height="24" fill="white" viewBox="0 0 24 24">
							<path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" />
							<path d="M12 8v8m-4-4h8" />
						</svg>
					</div>
					<h3 class="action-title">New Project</h3>
					<p class="action-description">Start a new game project with basic structure and templates</p>
				</div>

				<div class="action-card" onclick="openProject()">
					<div class="action-icon">
						<svg width="24" height="24" fill="white" viewBox="0 0 24 24">
							<path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
						</svg>
					</div>
					<h3 class="action-title">Open Project</h3>
					<p class="action-description">Continue working on an existing game project</p>
				</div>

				<div class="action-card" onclick="importProject()">
					<div class="action-icon">
						<svg width="24" height="24" fill="white" viewBox="0 0 24 24">
							<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
							<path d="M7 10l5 5 5-5" />
							<path d="M12 15V3" />
						</svg>
					</div>
					<h3 class="action-title">Import Project</h3>
					<p class="action-description">Import an existing project from a different location</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Main Application -->
	<div class="app-container">
		<!-- Header -->
		<div class="header">
			<div class="logo-section">
				<div class="logo">
					<svg viewBox="0 0 100 100">
						<path d="M20 20 L50 10 L80 20 L50 30 Z M50 30 L50 70 M30 40 L70 40 M25 60 L75 60" />
					</svg>
				</div>
				<div class="project-info">
					<div class="project-name">The Mystic Forest</div>
					<div class="project-path">~/ScribeEngine_Games/TheMysticForest</div>
				</div>
			</div>

			<div class="header-actions">
				<div class="server-status">
					<div class="status-dot"></div>
					<span>Server Running - localhost:5000</span>
				</div>
				<button class="btn btn-secondary" onclick="openInBrowser()">
					<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
						<path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6" />
						<path d="M15 3h6v6" />
						<path d="M10 14L21 3" />
					</svg>
					Open in Browser
				</button>
				<button class="btn btn-primary" onclick="buildGame()">
					<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
						<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
						<path d="M17 8l-5-5-5 5" />
						<path d="M12 3v12" />
					</svg>
					Build Game
				</button>
			</div>
		</div>

		<!-- Main Content -->
		<div class="main-content">
			<!-- Sidebar -->
			<div class="sidebar">
				<div class="sidebar-tabs">
					<button class="sidebar-tab active" onclick="switchTab('explorer')">Files</button>
					<button class="sidebar-tab" onclick="switchTab('settings')">Settings</button>
				</div>

				<div class="sidebar-content" id="sidebarContent">
					<!-- Project Explorer -->
					<div class="project-explorer" id="explorerTab">
						<div class="explorer-section">
							<div class="section-header">
								<span>Story Files</span>
								<button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
									onclick="addNewFile()">
									<svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
										<path d="M12 5v14m-7-7h14" />
									</svg>
								</button>
							</div>
							<ul class="file-tree">
								<li class="file-item active" onclick="openFile('start.tgame')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
										<path d="M16 13H8m8-4H8m8 8H8" />
									</svg>
									<span class="file-name">start.tgame</span>
								</li>
								<li class="file-item" onclick="openFile('forest_path.tgame')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
										<path d="M16 13H8m8-4H8m8 8H8" />
									</svg>
									<span class="file-name">forest_path.tgame</span>
								</li>
								<li class="file-item" onclick="openFile('inventory.tgame')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
										<path d="M16 13H8m8-4H8m8 8H8" />
									</svg>
									<span class="file-name">inventory.tgame</span>
								</li>
							</ul>
						</div>

						<div class="explorer-section">
							<div class="section-header">
								<span>Game Logic</span>
								<button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">
									<svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
										<path d="M12 5v14m-7-7h14" />
									</svg>
								</button>
							</div>
							<ul class="file-tree">
								<li class="file-item" onclick="openFile('systems.py')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
									</svg>
									<span class="file-name">systems.py</span>
								</li>
								<li class="file-item" onclick="openFile('npc_data.py')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
									</svg>
									<span class="file-name">npc_data.py</span>
								</li>
							</ul>
						</div>

						<div class="explorer-section">
							<div class="section-header">
								<span>Configuration</span>
							</div>
							<ul class="file-tree">
								<li class="file-item" onclick="openFile('project.json')">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
										<path d="M14 2v6h6" />
									</svg>
									<span class="file-name">project.json</span>
								</li>
							</ul>
						</div>

						<div class="explorer-section">
							<div class="section-header">
								<span>Assets</span>
								<button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">
									<svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
										<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
										<path d="M7 10l5 5 5-5" />
										<path d="M12 15V3" />
									</svg>
								</button>
							</div>
							<ul class="file-tree">
								<li class="file-item">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
										<circle cx="8.5" cy="8.5" r="1.5" />
										<path d="M21 15l-5-5L5 21" />
									</svg>
									<span class="file-name">forest_bg.jpg</span>
								</li>
								<li class="file-item">
									<svg class="file-icon" fill="currentColor" viewBox="0 0 24 24">
										<path d="M9 12l2 2 4-4" />
										<circle cx="12" cy="12" r="9" />
									</svg>
									<span class="file-name">ambient_forest.mp3</span>
								</li>
							</ul>
						</div>
					</div>

					<!-- Settings Tab -->
					<div class="project-explorer" id="settingsTab" style="display: none;">
						<div class="explorer-section">
							<div class="section-header">
								<span>Project Settings</span>
							</div>
							<div style="padding: 16px 0;">
								<label style="display: block; margin-bottom: 8px; font-size: 14px;">Game Title:</label>
								<input type="text" value="The Mystic Forest"
									style="width: 100%; padding: 8px; border: 1px solid var(--border-color); background: var(--tertiary-bg); color: var(--text-primary); border-radius: 4px;">
							</div>
							<div style="padding: 16px 0;">
								<label style="display: block; margin-bottom: 8px; font-size: 14px;">Author:</label>
								<input type="text" value="Story Creator"
									style="width: 100%; padding: 8px; border: 1px solid var(--border-color); background: var(--tertiary-bg); color: var(--text-primary); border-radius: 4px;">
							</div>
							<div style="padding: 16px 0;">
								<label style="display: block; margin-bottom: 8px; font-size: 14px;">Starting
									Passage:</label>
								<input type="text" value="start"
									style="width: 100%; padding: 8px; border: 1px solid var(--border-color); background: var(--tertiary-bg); color: var(--text-primary); border-radius: 4px;">
							</div>
						</div>

						<div class="explorer-section">
							<div class="section-header">
								<span>Player Settings</span>
							</div>
							<div style="padding: 16px 0;">
								<label
									style="display: flex; align-items: center; gap: 8px; font-size: 14px; margin-bottom: 12px;">
									<input type="checkbox" checked>
									Use default player object
								</label>
								<label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
									<input type="checkbox" checked>
									Use default inventory system
								</label>
							</div>
						</div>

						<div class="explorer-section">
							<div class="section-header">
								<span>Server Settings</span>
							</div>
							<div style="padding: 16px 0;">
								<label
									style="display: flex; align-items: center; gap: 8px; font-size: 14px; margin-bottom: 12px;">
									<input type="checkbox" checked>
									Auto-reload on file changes
								</label>
								<label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
									<input type="checkbox">
									Debug mode
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Editor Area -->
			<div class="editor-area">
				<div class="editor-tabs">
					<div class="editor-tab active">
						<span>start.tgame</span>
						<button class="tab-close">×</button>
					</div>
					<div class="editor-tab">
						<span>project.json</span>
						<button class="tab-close">×</button>
					</div>
				</div>

				<div class="editor-content">
					<div class="syntax-highlighted" id="syntaxEditor" contenteditable="true" spellcheck="false">
						<span class="syntax-passage">:: start</span>
						Welcome to the Mystic Forest, brave adventurer!

						You find yourself standing at the edge of an ancient woodland. The trees tower above you, their
						branches creating a natural canopy that filters the sunlight into dancing patterns on the forest
						floor.

						<span class="syntax-comment">{# Set up the initial game state #}</span>
						<span class="syntax-jinja">{%- python %}</span>
						<span class="syntax-jinja">player.name = "Adventurer"
							player.health = 100
							set_flag('first_visit', True)
							debug("Game started!")</span>
						<span class="syntax-jinja">{%- endpython %}</span>

						What is your name, brave soul?
						<span class="syntax-jinja">{{ input_field('player.name', placeholder='Enter your name',
							button_text='Continue') | safe }}</span>

						<span class="syntax-jinja">{% if player.name %}</span>
						<p><strong>Welcome, {{ player.name }}!</strong></p>

						The path splits before you into three directions:

						<span class="syntax-link">[[Take the sunlit path to the east->EastPath]]</span>
						<span class="syntax-link">[[Follow the dark trail north->NorthPath]]</span>
						<span class="syntax-link">[[Venture into the misty western grove->WestGrove]]</span>
						<span class="syntax-jinja">{% endif %}</span>

						<span class="syntax-passage">:: EastPath</span> <span class="syntax-tag">#sunny #safe</span>
						The eastern path is bathed in warm sunlight. Birds chirp melodiously in the branches above, and
						wildflowers line the trail.

						<span class="syntax-jinja">{% if get_flag('first_visit') %}</span>
						This peaceful atmosphere puts you at ease after your long journey.
						<span class="syntax-jinja">{% do set_flag('visited_east', True) %}</span>
						<span class="syntax-jinja">{% endif %}</span>

						You notice something glinting in the grass nearby.

						<span class="syntax-link">[[Investigate the glinting object->FindCoin]]</span>
						<span class="syntax-link">[[Continue down the path->EastDeeper]]</span>
						<span class="syntax-link">[[Return to the forest entrance->start]]</span>

						<span class="syntax-passage">:: FindCoin</span> <span class="syntax-tag">#treasure</span>
						You push aside the tall grass and discover a golden coin partially buried in the earth!

						<span class="syntax-jinja">{%- python %}</span>
						<span class="syntax-jinja">add_to_inventory('gold_coin', 1)
							player.score += 10
							debug(f"{player.name} found a gold coin!")</span>
						<span class="syntax-jinja">{%- endpython %}</span>

						<span class="syntax-string">*You gained 1 Gold Coin and 10 points!*</span>

						<span class="syntax-link">[[Continue exploring the eastern path->EastDeeper]]</span>
						<span class="syntax-link">[[Head back to examine the other paths->start]]</span>

						<span class="syntax-passage">:: NorthPath</span> <span class="syntax-tag">#dark #danger</span>
						The northern trail leads into darker territory. The trees here are older and more twisted, their
						gnarled branches reaching out like skeletal fingers.

						<span class="syntax-jinja">{% if has_item('torch') %}</span>
						Your torch casts flickering shadows that dance ominously on the tree trunks.
						<span class="syntax-jinja">{% else %}</span>
						The darkness makes it difficult to see what lies ahead.
						<span class="syntax-jinja">{% endif %}</span>

						A low growling sound echoes from somewhere in the shadows.

						<span class="syntax-link">[[Approach the source of the growling->EncounterWolf|| {% do
							set_flag('approached_danger', True) %}]]</span>
						<span class="syntax-link">[[Try to sneak past quietly->SneakPast]]</span>
						<span class="syntax-link">[[Retreat back to safety->start|| {% do player.health -= 5 %}]]</span>

						<span class="syntax-passage">:: CheckHealth</span> <span class="syntax-tag">#silent</span>
						<span class="syntax-jinja">{% if player.health <= 0 %}</span>
								<span class="syntax-link">[[->GameOver]]</span>
								<span class="syntax-jinja">{% else %}</span>
								<span class="syntax-link">[[->ContinueAdventure]]</span>
								<span class="syntax-jinja">{% endif %}</span>

								<span class="syntax-passage">:: NavMenu</span> <span class="syntax-tag">#menu</span>
								<div class="nav-menu">
									<span class="syntax-link">[[Inventory->ViewInventory]]</span> |
									<span class="syntax-link">[[Character Stats->ViewStats]]</span> |
									<span class="syntax-link">[[Save Game->SaveGame]]</span>
								</div>

								<span class="syntax-passage">:: ViewInventory</span> <span
									class="syntax-tag">#menu</span>
								<h2>Your Inventory</h2>

								<span class="syntax-jinja">{% if not player.inventory %}</span>
								<p><em>Your inventory is empty.</em></p>
								<span class="syntax-jinja">{% else %}</span>
								<ul>
									<span class="syntax-jinja">{% for item in player.inventory %}</span>
									<li>{{ item.name }} ({{ item.quantity }})</li>
									<span class="syntax-jinja">{% endfor %}</span>
								</ul>
								<span class="syntax-jinja">{% endif %}</span>

								<span class="syntax-link">[[Back to Game->{{ last_passage }}]]</span>
					</div>
				</div>
			</div>

			<!-- Preview Panel -->
			<div class="preview-panel" id="previewPanel">
				<div class="preview-header">
					<span class="preview-title">Live Preview</span>
					<div class="preview-actions">
						<button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
							onclick="refreshPreview()">
							<svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
								<path d="M23 4v6h-6" />
								<path d="M20.49 15a9 9 0 11-2.12-9.36L23 10" />
							</svg>
						</button>
						<button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;"
							onclick="togglePreview()">
							<svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
								<path d="M18 6L6 18M6 6l12 12" />
							</svg>
						</button>
					</div>
				</div>

				<div class="preview-content">
					<div class="preview-game">
						<div class="game-passage-title">Welcome to the Mystic Forest</div>

						<div class="game-text">
							Welcome to the Mystic Forest, brave adventurer!
						</div>

						<div class="game-text">
							You find yourself standing at the edge of an ancient woodland. The trees tower above you,
							their branches creating a natural canopy that filters the sunlight into dancing patterns on
							the forest floor.
						</div>

						<div class="game-text">
							What is your name, brave soul?
						</div>

						<div class="game-text">
							<input type="text" placeholder="Enter your name"
								style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-right: 8px;">
							<button
								style="padding: 8px 16px; background: #4a9eff; color: white; border: none; border-radius: 4px; cursor: pointer;">Continue</button>
						</div>

						<div class="game-text" style="margin-top: 20px;">
							<strong>Welcome, Adventurer!</strong>
						</div>

						<div class="game-text">
							The path splits before you into three directions:
						</div>

						<div class="game-links">
							<a href="#" class="game-link" onclick="navigateToPassage('EastPath')">Take the sunlit path
								to the east</a>
							<a href="#" class="game-link" onclick="navigateToPassage('NorthPath')">Follow the dark trail
								north</a>
							<a href="#" class="game-link" onclick="navigateToPassage('WestGrove')">Venture into the
								misty western grove</a>
						</div>
					</div>

					<div class="game-state">
						<div class="state-item"><strong>Player:</strong> Adventurer</div>
						<div class="state-item"><strong>Health:</strong> 100 HP</div>
						<div class="state-item"><strong>Score:</strong> 0</div>
						<div class="state-item"><strong>Inventory:</strong> Empty</div>
						<div class="state-item"><strong>Current Passage:</strong> start</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>

</html>
